<!--
  Skeleton Loading Components

  Usage:
    {% from "components/skeleton.html" import skeleton_text, skeleton_card, skeleton_table %}

    {{ skeleton_text(lines=3) }}
    {{ skeleton_card() }}
    {{ skeleton_table(rows=5, cols=4) }}
-->

<!-- Skeleton Text Lines -->
{% macro skeleton_text(lines=3, width_class="w-full") %}
<div class="animate-pulse space-y-3" role="status" aria-label="Loading content">
    {% for i in range(lines) %}
    <div class="h-4 bg-gray-200 rounded {{ width_class if loop.last and lines > 1 else 'w-full' }}"></div>
    {% endfor %}
    <span class="sr-only">Loading...</span>
</div>
{% endmacro %}


<!-- Skeleton Card -->
{% macro skeleton_card(show_image=true) %}
<div class="bg-white shadow-sm rounded-lg border border-gray-200 p-6 animate-pulse" role="status" aria-label="Loading card">
    {% if show_image %}
    <div class="h-48 bg-gray-200 rounded-lg mb-4"></div>
    {% endif %}
    <div class="space-y-3">
        <div class="h-6 bg-gray-200 rounded w-3/4"></div>
        <div class="h-4 bg-gray-200 rounded w-full"></div>
        <div class="h-4 bg-gray-200 rounded w-5/6"></div>
    </div>
    <div class="mt-4 flex gap-2">
        <div class="h-10 bg-gray-200 rounded w-24"></div>
        <div class="h-10 bg-gray-200 rounded w-24"></div>
    </div>
    <span class="sr-only">Loading...</span>
</div>
{% endmacro %}


<!-- Skeleton Table -->
{% macro skeleton_table(rows=5, cols=4) %}
<div class="bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden animate-pulse" role="status" aria-label="Loading table">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                {% for i in range(cols) %}
                <th class="px-6 py-3">
                    <div class="h-4 bg-gray-200 rounded w-20"></div>
                </th>
                {% endfor %}
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for row in range(rows) %}
            <tr>
                {% for col in range(cols) %}
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded {{ 'w-32' if loop.first else 'w-24' }}"></div>
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <span class="sr-only">Loading...</span>
</div>
{% endmacro %}


<!-- Skeleton List -->
{% macro skeleton_list(items=5) %}
<div class="bg-white shadow-sm rounded-lg border border-gray-200 divide-y divide-gray-200 animate-pulse" role="status" aria-label="Loading list">
    {% for i in range(items) %}
    <div class="px-6 py-4 flex items-center">
        <div class="flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full"></div>
        <div class="ml-4 flex-1 space-y-2">
            <div class="h-4 bg-gray-200 rounded w-1/3"></div>
            <div class="h-3 bg-gray-200 rounded w-2/3"></div>
        </div>
        <div class="h-8 bg-gray-200 rounded w-20"></div>
    </div>
    {% endfor %}
    <span class="sr-only">Loading...</span>
</div>
{% endmacro %}


<!-- Skeleton Form -->
{% macro skeleton_form(fields=4) %}
<div class="bg-white shadow-sm rounded-lg border border-gray-200 p-6 space-y-6 animate-pulse" role="status" aria-label="Loading form">
    {% for i in range(fields) %}
    <div>
        <div class="h-4 bg-gray-200 rounded w-24 mb-2"></div>
        <div class="h-10 bg-gray-200 rounded w-full"></div>
    </div>
    {% endfor %}
    <div class="flex gap-3">
        <div class="h-10 bg-gray-200 rounded w-24"></div>
        <div class="h-10 bg-gray-200 rounded w-24"></div>
    </div>
    <span class="sr-only">Loading...</span>
</div>
{% endmacro %}


<!-- Skeleton Avatar with Text -->
{% macro skeleton_avatar_text() %}
<div class="flex items-center space-x-4 animate-pulse" role="status" aria-label="Loading user">
    <div class="flex-shrink-0 h-12 w-12 bg-gray-200 rounded-full"></div>
    <div class="flex-1 space-y-2">
        <div class="h-4 bg-gray-200 rounded w-32"></div>
        <div class="h-3 bg-gray-200 rounded w-24"></div>
    </div>
    <span class="sr-only">Loading...</span>
</div>
{% endmacro %}


<!-- Skeleton Stats Grid -->
{% macro skeleton_stats(count=4) %}
<div class="grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-{{ count }}">
    {% for i in range(count) %}
    <div class="bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 animate-pulse" role="status" aria-label="Loading stat">
        <div class="px-6 py-5">
            <div class="h-4 bg-gray-200 rounded w-24 mb-3"></div>
            <div class="h-8 bg-gray-200 rounded w-16 mb-2"></div>
            <div class="h-3 bg-gray-200 rounded w-32"></div>
        </div>
        <span class="sr-only">Loading...</span>
    </div>
    {% endfor %}
</div>
{% endmacro %}


<!-- CSS for skeleton animation (add to styles.css if not already present) -->
<style>
@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

.animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}
</style>
